(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{20:function(e,t,n){},44:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),s=n.n(r),a=n(31),i=n.n(a),l=(n(44),n(8)),o=n.n(l),j=n(13),h=n(10),b=(n(20),n(14)),u=n.n(b),d=n(32),p=n.n(d),x=n(2),O=n(33),f=n.n(O),g=n(34),y=n.n(g);var v=function(){var e=Object(r.useState)([]),t=Object(h.a)(e,2),n=t[0],s=t[1],a=Object(r.useState)(""),i=Object(h.a)(a,2),l=i[0],b=i[1],d=Object(r.useState)(""),O=Object(h.a)(d,2),g=O[0],v=O[1],m=Object(r.useState)(""),k=Object(h.a)(m,2),w=k[0],C=k[1],S=Object(x.l)(),N=Object(x.k)();function L(){return(L=Object(j.a)(o.a.mark((function e(t){var n,r,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.search.replace("?",""),e.next=3,u()("https://logs.beuke.org/search/"+n);case 3:r=e.sent,a=p.a.sortBy(r.data.results,[function(e){return e.file}]),v(r.data.hits),i=a.map((function(e){if(e){var t=e.match.split(" "),r=t[1].slice(0,20),s=t.slice(2).join(" ");return Object(c.jsxs)("tr",{onClick:function(){return N.push("/logs/"+e.file+"#"+e.line)},children:[Object(c.jsxs)("td",{children:["20",e.file.substring(8,16)," "]}),Object(c.jsx)("td",{children:Object(c.jsx)("div",{style:{color:"grey",display:"inline"},children:r})}),Object(c.jsxs)("td",{style:{width:4e3},children:[Object(c.jsx)("div",{style:{color:"white",display:"inline"},children:Object(c.jsx)(f.a,{highlightClassName:"YourHighlightClass",searchWords:[n.replace(/&page=\d+/,"")],autoEscape:!0,textToHighlight:s})}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{})]})]})}})),s(i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(j.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=9;break}if(n=function(e){C(e),N.push("/"),v(0),s([])},!(l.length<1)){e.next=4;break}return e.abrupt("return",n());case 4:if(l.match(/^[0-9a-zA-Z,-,+,\s]+$/)){e.next=6;break}return e.abrupt("return",n("Search term has to be alphanumeric"));case 6:if(!(l.length<3)){e.next=8;break}return e.abrupt("return",n("Search term length has to be longer than 3"));case 8:N.push("/?"+l);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(e){L.apply(this,arguments)}(S)}),[S]),Object(c.jsxs)("div",{className:"Center",children:[Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)("h1",{style:{color:"white",fontSize:22},children:"Haskell IRC Log Search"}),Object(c.jsx)("h2",{style:{color:"white",fontSize:17},children:"2002 - 2020"}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{style:{height:30,width:500,fontSize:17,color:"grey"},value:l,onChange:function(e){return b(e.target.value)},onKeyDown:function(e){return E.apply(this,arguments)}}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)("div",{style:{color:"grey"},children:g?"Found matches in "+g+" files (days)":w}),Object(c.jsx)("br",{}),Object(c.jsxs)("div",{className:"SearchResults",children:[Object(c.jsx)("div",{style:{color:"grey"},className:"App",children:Object(c.jsx)("table",{padding:5,children:n})}),Object(c.jsx)("br",{}),"\xac",g/100<1?null:Object(c.jsx)("div",{style:{color:"white",width:"30%",margin:"0 auto"},children:Object(c.jsx)(y.a,{previousLabel:"<--",nextLabel:"--\x3e",breakLabel:"...",breakClassName:"break-me",pageCount:g/100,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:function(e){N.push(S.search.replace(/&page=\d+/,"")+"&page="+ ++e.selected)},containerClassName:"pagination",activeClassName:"active"})})]})]})},m=n(36),k=n(37),w=n.n(k);var C=function(){var e=Object(r.useState)([]),t=Object(h.a)(e,2),n=t[0],s=t[1],a=Object(x.l)(),i=a.pathname;function l(){return(l=Object(j.a)(o.a.mark((function e(t){var n,r,a,i,l,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pathname.replace("/logs/",""),e.next=3,u()("https://logs.beuke.org/file/"+n);case 3:r=e.sent,a=w()((function(){return"#xxxxxx".replace(/x/g,(function(e){return(16*Math.random()|0).toString(16)}))})),i=r.data.split("\n").flat(0).map((function(e,t){var n=t+1;if(e){var r=e.split(" "),s=r[0],i=r[1].slice(0,20),l=r.slice(2).join(" ");return Object(c.jsxs)("tr",{children:[Object(c.jsx)(m.HashLink,{to:"#"+n,id:n,children:Object(c.jsx)("td",{children:Object(c.jsx)("div",{style:{color:"grey",display:"inline"},children:s})})}),Object(c.jsx)("td",{children:Object(c.jsx)("div",{style:{color:a(i),display:"inline"},children:i})}),Object(c.jsx)("td",{children:Object(c.jsx)("div",{style:{color:"black",display:"inline"},children:l})})]})}})),s(i),t.hash&&(l=t.hash.replace("#",""),(j=document.getElementById(l))&&j.scrollIntoView({block:"start"}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(e){l.apply(this,arguments)}(a)}),[i]),Object(c.jsx)("div",{className:"Center",children:Object(c.jsx)("table",{padding:5,children:Object(c.jsx)("div",{className:"App",children:n})})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,77)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))},N=n(11),L=n(38);Object(L.enable)({brightness:80,contrast:85,sepia:30}),i.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsxs)(N.HashRouter,{children:[Object(c.jsx)(x.d,{path:"/logs",children:Object(c.jsx)(C,{})}),Object(c.jsx)(x.d,{exact:!0,path:"/",children:Object(c.jsx)(v,{})})]})}),document.getElementById("root")),S()}},[[76,1,2]]]);
//# sourceMappingURL=main.1e8ac69b.chunk.js.map